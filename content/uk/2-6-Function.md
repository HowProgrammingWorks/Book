## 2.6. Функція вищого порядку, чиста функція, побічні ефекти

Оголошення функції (Function definition) - в `JavaScript` це спосіб оголошення функції, який видно з будь-якого місця в лексичному контексті, в якому оголошено функцію, приклад:

код

Функціональний вираз (Function expression) — зв'язування функції з ідентифікатором за допомогою присвоєння, у якому значення буде доступне через ідентифікатор не в усьому лексичному контексті, лише після місця присвоєння. Має кілька синтаксичних варіантів:

Функціональний вираз з іменованою функцією (Named function expression):

код


Анонімний функціональний вираз (Anonymous function expression):

код


Стрілка або лямбда-функція (Arrow, Lambda function):

код


Лямбда-вираз, Функція-стрілка з виразом як тіло (Lambda expression, Arrow function):

код

> Чиста функція (Pure Function) – детермінована функція без побічних ефектів.

Чиста функція - функція, що обчислює результат тільки на основі аргументів, яка не має стану і не звертається до операцій введення-виведення. Результат такої функції завжди є детермінованим і без побічних ефектів (див. побічний ефект).

> Замикання (Closure) — функція, пов'язана з лексичним оточенням на момент створення.

Якщо повернути функцію `g` з функції `f`, то `g` бачитиме контекст функції `f`, так само, як і свої аргументи. Якщо `f` повертає `g`, то кажуть, що екземпляр `g` замкнув контекст `f`. Замикання - це спосіб, що дозволяє пов'язати функцію з контекстом (з даними або змінними контексту). Замикання дозволяє створити ефект, аналогічний стану об'єкта (набору його властивостей) в ОВП. Властивості пов'язані з методами через об'єкт, насправді об'єкт в ОВП сам є контекстом зв'язування. Замикання так само породжує подібний контекст, але на основі функцій першого класу та лексичного контексту, а не об'єктного.

З допомогою замикання можна реалізувати функціональне наслідування.

Приклади:

код



> Суперпозиция (Superposition) — об'єднання виклику функцій у вирази в такий спосіб, що результат одних функцій стає аргументами інших функцій.


код



> Композиція (Composition) — створення нової функції об'єднанням більш простих.


код


код


> Часткове застосування (Partial application)

код


> Каррування (Currying)

код


> Побічні ефекти (Side effects)

> Функція вищого порядку (Higher-order Function)

1. Якщо функція передається в іншу функцію як аргумент, це колбек.
2. Якщо функція повертається як результат, це фабрика функцій на замиканнях.
3. Якщо функція, що повертається, має ту ж семантику, що й одержувана в аргументах, але з додатковою (розширеною) поведінкою, то це функція-обгортка.
4. Рідко буває, що функція, що повертається, не пов'язана з функцією з аргументів, або пов'язана не прямо, а також має іншу семантику і функцією-оберткою вона не є.
5. Якщо на виході клас чи функція-конструктор, це фабрики класів і прототипів відповідно.

> Функція-обгортка (Wrapper)

Функція, яка обертає іншу функцію (іноді об'єкт, інтерфейс чи функціональний об'єкт), додаючи додаткову поведінку. Можна обернути цілий інтерфейс API і навіть асинхронну функцію разом з колбеками (якщо відомий контракт).

код










