## 2.4. Контекст та лексичне оточення

> Область видимості (Scope)

Область видимості - частина коду, з якої "видно" ідентифікатор. Розглянемо приклад:

```js
const level = 1;

const f = () => {
  const level = 2;
  {
    const level = 3;
    console.log(level); // 3
  }
  console.log(level); // 2
};
```

У сучасному стандарті JavaScript область видимості породжується функцією або будь-яким блоком операторів, що мають фігурні дужки {}. У Python scope породжується лише функціями. Порівняйте цей код із попереднім прикладом:

```py
level = 1

def f():
  level = 2
  if level == 2:
    level = 3
    print(level) // 3
  print(level) // 3

f()
```

> Лексичний контекст (Lexical environment)

Набір ідентифікаторів доступний у локальному блоці або функції. Якщо ідентифікатор не знайдено в лексичному контексті, пошук продовжиться в батьківському контексті, адже контексти мають вкладену структуру. Якщо дійшовши до кореня ідентифікатора не знайдено, буде проведено пошук у глобальному контексті. Для JavaScript лексичні контексти обмежуються блоками '{}' і функціями, а Python — лише функціями.

Лексичний контекст чи лексичне оточення мають вкладеність, тобто крім локальних змінних у блоці, що породжує контекст, є й вищий блок зі своїм контекстом. Якщо ідентифікатор визначений у контексті, то його видно у всіх вкладеннях, якщо тільки не відбувається перекриття імен. Перекриття – це випадок, коли у вкладеному контексті теж оголошено ідентифікатор, що вже є у зовнішньому, тоді значення із зовнішнього контексту стає недоступним і ми маємо доступ лише до значення ідентифікатора з внутрішнього контексту.

> Об'єктний контекст

Об'єкт, доступний з методів і функцій через спеціальний ідентифікатор `this` теж використовується як контекст. У більшості мов програмування метод пов'язується з `this` при створенні об'єкта класу. Але JavaScript функції можуть бути прикріплені до `this` за допомогою `bind` або одноразово викликані в контексті об'єкта через `call` і `apply`. Усі функції, крім стрілочних, можуть бути пов'язані з об'єктами.

> Глобальний контекст (Global context)

Якщо ідентифікатор не знаходиться у жодному з вкладених лексичних контекстів, то буде виконано його пошук у глобальному об'єкті-довіднику, який є глобальним контекстом (JavaScript `global` або `window`).
